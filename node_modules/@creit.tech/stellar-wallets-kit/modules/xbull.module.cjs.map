{"version":3,"file":"xbull.module.cjs","sources":["../../src/modules/xbull.module.ts"],"sourcesContent":["import { xBullWalletConnect } from '@creit.tech/xbull-wallet-connect';\nimport { ModuleInterface, ModuleType } from '../types';\nimport { parseError } from '../utils';\n\nexport const XBULL_ID = 'xbull';\n\nexport class xBullModule implements ModuleInterface {\n  moduleType: ModuleType = ModuleType.HOT_WALLET;\n\n  productId: string = XBULL_ID;\n  productName: string = 'xBull';\n  productUrl: string = 'https://xbull.app';\n  productIcon: string = 'https://stellar.creit.tech/wallet-icons/xbull.png';\n\n  async isAvailable(): Promise<boolean> {\n    return true;\n  }\n\n  async getAddress(): Promise<{ address: string }> {\n    try {\n      const bridge: xBullWalletConnect = new xBullWalletConnect();\n      const publicKey: string = await bridge.connect();\n      bridge.closeConnections();\n      return { address: publicKey };\n    } catch (e: any) {\n      throw parseError(e);\n    }\n  }\n\n  async signTransaction(\n    xdr: string,\n    opts?: {\n      networkPassphrase?: string;\n      address?: string;\n      path?: string;\n      submit?: boolean;\n      submitUrl?: string;\n    }\n  ): Promise<{ signedTxXdr: string; signerAddress?: string }> {\n    try {\n      const bridge: xBullWalletConnect = new xBullWalletConnect();\n\n      const signedXdr: string = await bridge.sign({\n        xdr,\n        publicKey: opts?.address,\n        network: opts?.networkPassphrase,\n      });\n\n      bridge.closeConnections();\n      return { signedTxXdr: signedXdr, signerAddress: opts?.address };\n    } catch (e: any) {\n      throw parseError(e);\n    }\n  }\n\n  async signAuthEntry(): Promise<{ signedAuthEntry: string; signerAddress?: string }> {\n    throw {\n      code: -3,\n      message: 'xBull does not support the \"signAuthEntry\" function',\n    };\n  }\n\n  async signMessage(\n    message: string,\n    opts?: {\n      networkPassphrase?: string;\n      address?: string;\n      path?: string;\n    }\n  ): Promise<{ signedMessage: string; signerAddress?: string }> {\n    try {\n      const bridge: xBullWalletConnect = new xBullWalletConnect();\n\n      const result = await bridge.signMessage(message, {\n        address: opts?.address,\n        networkPassphrase: opts?.networkPassphrase,\n      });\n\n      bridge.closeConnections();\n      return result;\n    } catch (e: any) {\n      throw parseError(e);\n    }\n  }\n\n  async getNetwork(): Promise<{ network: string; networkPassphrase: string }> {\n    throw {\n      code: -3,\n      message: 'xBull does not support the \"getNetwork\" function',\n    };\n  }\n}\n"],"names":["ModuleType","xBullWalletConnect","parseError"],"mappings":";;;;;;AAIO,MAAM,QAAQ,GAAG;MAEX,WAAW,CAAA;AAAxB,IAAA,WAAA,GAAA;AACE,QAAA,IAAA,CAAA,UAAU,GAAeA,gBAAU,CAAC,UAAU;QAE9C,IAAS,CAAA,SAAA,GAAW,QAAQ;QAC5B,IAAW,CAAA,WAAA,GAAW,OAAO;QAC7B,IAAU,CAAA,UAAA,GAAW,mBAAmB;QACxC,IAAW,CAAA,WAAA,GAAW,mDAAmD;;AAEzE,IAAA,MAAM,WAAW,GAAA;AACf,QAAA,OAAO,IAAI;;AAGb,IAAA,MAAM,UAAU,GAAA;AACd,QAAA,IAAI;AACF,YAAA,MAAM,MAAM,GAAuB,IAAIC,qCAAkB,EAAE;AAC3D,YAAA,MAAM,SAAS,GAAW,MAAM,MAAM,CAAC,OAAO,EAAE;YAChD,MAAM,CAAC,gBAAgB,EAAE;AACzB,YAAA,OAAO,EAAE,OAAO,EAAE,SAAS,EAAE;;QAC7B,OAAO,CAAM,EAAE;AACf,YAAA,MAAMC,gBAAU,CAAC,CAAC,CAAC;;;AAIvB,IAAA,MAAM,eAAe,CACnB,GAAW,EACX,IAMC,EAAA;AAED,QAAA,IAAI;AACF,YAAA,MAAM,MAAM,GAAuB,IAAID,qCAAkB,EAAE;AAE3D,YAAA,MAAM,SAAS,GAAW,MAAM,MAAM,CAAC,IAAI,CAAC;gBAC1C,GAAG;gBACH,SAAS,EAAE,IAAI,EAAE,OAAO;gBACxB,OAAO,EAAE,IAAI,EAAE,iBAAiB;AACjC,aAAA,CAAC;YAEF,MAAM,CAAC,gBAAgB,EAAE;YACzB,OAAO,EAAE,WAAW,EAAE,SAAS,EAAE,aAAa,EAAE,IAAI,EAAE,OAAO,EAAE;;QAC/D,OAAO,CAAM,EAAE;AACf,YAAA,MAAMC,gBAAU,CAAC,CAAC,CAAC;;;AAIvB,IAAA,MAAM,aAAa,GAAA;QACjB,MAAM;YACJ,IAAI,EAAE,CAAC,CAAC;AACR,YAAA,OAAO,EAAE,qDAAqD;SAC/D;;AAGH,IAAA,MAAM,WAAW,CACf,OAAe,EACf,IAIC,EAAA;AAED,QAAA,IAAI;AACF,YAAA,MAAM,MAAM,GAAuB,IAAID,qCAAkB,EAAE;YAE3D,MAAM,MAAM,GAAG,MAAM,MAAM,CAAC,WAAW,CAAC,OAAO,EAAE;gBAC/C,OAAO,EAAE,IAAI,EAAE,OAAO;gBACtB,iBAAiB,EAAE,IAAI,EAAE,iBAAiB;AAC3C,aAAA,CAAC;YAEF,MAAM,CAAC,gBAAgB,EAAE;AACzB,YAAA,OAAO,MAAM;;QACb,OAAO,CAAM,EAAE;AACf,YAAA,MAAMC,gBAAU,CAAC,CAAC,CAAC;;;AAIvB,IAAA,MAAM,UAAU,GAAA;QACd,MAAM;YACJ,IAAI,EAAE,CAAC,CAAC;AACR,YAAA,OAAO,EAAE,kDAAkD;SAC5D;;AAEJ;;;;;"}