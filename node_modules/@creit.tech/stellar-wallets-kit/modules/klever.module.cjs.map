{"version":3,"file":"klever.module.cjs","sources":["../../src/modules/klever.module.ts"],"sourcesContent":["import { KitActions, ModuleInterface, ModuleType } from '../types';\nimport { parseError } from '../utils';\n\ndeclare const window: Window & {\n    kleverWallet?: {\n        stellar?: KitActions;\n    };\n};\n\nexport const KLEVER_ID = 'klever';\n\nexport class KleverModule implements ModuleInterface {\n  moduleType: ModuleType = ModuleType.HOT_WALLET;\n\n  productId: string = KLEVER_ID;\n  productName: string = 'Klever Wallet';\n  productUrl: string = 'https://klever.io/';\n  productIcon: string = 'https://stellar.creit.tech/wallet-icons/klever.png';\n\n  async runChecks(): Promise<void> {\n    if (!(await this.isAvailable())) {\n      throw new Error('Klever Wallet is not installed');\n    }\n  }\n\n  isAvailable(): Promise<boolean> {\n    return new Promise(resolve => resolve(typeof window !== \"undefined\" && !!window.kleverWallet?.stellar));\n  }\n\n  async getAddress(): Promise<{ address: string }> {\n    return this.runChecks()\n      .then(() => window.kleverWallet!.stellar!.getAddress())\n      .catch(e => { throw parseError(e); });\n  }\n\n  async signTransaction(\n    xdr: string,\n    opts?: {\n      networkPassphrase?: string;\n      address?: string;\n      path?: string;\n      submit?: boolean;\n      submitUrl?: string;\n    }\n  ): Promise<{ signedTxXdr: string; signerAddress?: string }> {\n    return this.runChecks()\n      .then(() => window.kleverWallet!.stellar!.signTransaction(xdr, opts))\n      .catch(e => { throw parseError(e); });\n  }\n\n  async signAuthEntry(\n    authEntry: string,\n    opts?: {\n      networkPassphrase?: string;\n      address?: string;\n      path?: string;\n    }\n  ): Promise<{ signedAuthEntry: string; signerAddress?: string }> {\n    return this.runChecks()\n      .then(() => window.kleverWallet!.stellar!.signAuthEntry(authEntry, opts))\n      .catch(e => { throw parseError(e); });\n  }\n\n  async signMessage(\n    message: string,\n    opts?: {\n      address?: string;\n    }\n  ): Promise<{ signedMessage: string; signerAddress?: string }> {\n    return this.runChecks()\n      .then(() => window.kleverWallet!.stellar!.signMessage(message, opts))\n      .catch(e => { throw parseError(e); });\n  }\n\n  async getNetwork(): Promise<{ network: string; networkPassphrase: string }> {\n    return this.runChecks()\n      .then(() => window.kleverWallet!.stellar!.getNetwork())\n      .catch(e => { throw parseError(e); });\n  }\n}\n"],"names":["ModuleType","parseError"],"mappings":";;;;;AASO,MAAM,SAAS,GAAG;MAEZ,YAAY,CAAA;AAAzB,IAAA,WAAA,GAAA;AACE,QAAA,IAAA,CAAA,UAAU,GAAeA,gBAAU,CAAC,UAAU;QAE9C,IAAS,CAAA,SAAA,GAAW,SAAS;QAC7B,IAAW,CAAA,WAAA,GAAW,eAAe;QACrC,IAAU,CAAA,UAAA,GAAW,oBAAoB;QACzC,IAAW,CAAA,WAAA,GAAW,oDAAoD;;AAE1E,IAAA,MAAM,SAAS,GAAA;QACb,IAAI,EAAE,MAAM,IAAI,CAAC,WAAW,EAAE,CAAC,EAAE;AAC/B,YAAA,MAAM,IAAI,KAAK,CAAC,gCAAgC,CAAC;;;IAIrD,WAAW,GAAA;QACT,OAAO,IAAI,OAAO,CAAC,OAAO,IAAI,OAAO,CAAC,OAAO,MAAM,KAAK,WAAW,IAAI,CAAC,CAAC,MAAM,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC;;AAGzG,IAAA,MAAM,UAAU,GAAA;QACd,OAAO,IAAI,CAAC,SAAS;AAClB,aAAA,IAAI,CAAC,MAAM,MAAM,CAAC,YAAa,CAAC,OAAQ,CAAC,UAAU,EAAE;AACrD,aAAA,KAAK,CAAC,CAAC,MAAM,MAAMC,gBAAU,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;;AAGzC,IAAA,MAAM,eAAe,CACnB,GAAW,EACX,IAMC,EAAA;QAED,OAAO,IAAI,CAAC,SAAS;AAClB,aAAA,IAAI,CAAC,MAAM,MAAM,CAAC,YAAa,CAAC,OAAQ,CAAC,eAAe,CAAC,GAAG,EAAE,IAAI,CAAC;AACnE,aAAA,KAAK,CAAC,CAAC,MAAM,MAAMA,gBAAU,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;;AAGzC,IAAA,MAAM,aAAa,CACjB,SAAiB,EACjB,IAIC,EAAA;QAED,OAAO,IAAI,CAAC,SAAS;AAClB,aAAA,IAAI,CAAC,MAAM,MAAM,CAAC,YAAa,CAAC,OAAQ,CAAC,aAAa,CAAC,SAAS,EAAE,IAAI,CAAC;AACvE,aAAA,KAAK,CAAC,CAAC,MAAM,MAAMA,gBAAU,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;;AAGzC,IAAA,MAAM,WAAW,CACf,OAAe,EACf,IAEC,EAAA;QAED,OAAO,IAAI,CAAC,SAAS;AAClB,aAAA,IAAI,CAAC,MAAM,MAAM,CAAC,YAAa,CAAC,OAAQ,CAAC,WAAW,CAAC,OAAO,EAAE,IAAI,CAAC;AACnE,aAAA,KAAK,CAAC,CAAC,MAAM,MAAMA,gBAAU,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;;AAGzC,IAAA,MAAM,UAAU,GAAA;QACd,OAAO,IAAI,CAAC,SAAS;AAClB,aAAA,IAAI,CAAC,MAAM,MAAM,CAAC,YAAa,CAAC,OAAQ,CAAC,UAAU,EAAE;AACrD,aAAA,KAAK,CAAC,CAAC,MAAM,MAAMA,gBAAU,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;;AAE1C;;;;;"}